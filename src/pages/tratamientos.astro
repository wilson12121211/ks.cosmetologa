---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import SectionTitle from '../components/SectionTitle.astro';
import TreatmentCard from '../components/TreatmentCard.astro';
import FilterTreatments from '../components/FilterTreatments.astro';
import TestimonialSlider from '../components/TestimonialSlider.astro';

const treatments = [
  {
    title:'Limpieza Profunda',
    description:'Elimina impurezas y revitaliza tu piel.',
    category:'Facial',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/sparkles.svg#icon' /></svg>`
  },
  {
    title:'Celuma LED',
    description:'Fototerapia que estimula el colágeno y mejora la textura.',
    category:'Facial',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/sun.svg#icon' /></svg>`
  },
  {
    title:'Peeling Químico',
    description:'Renovación celular para un tono uniforme.',
    category:'Facial',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/wand-magic.svg#icon' /></svg>`
  },
  {
    title:'Radiofrecuencia',
    description:'Reafirma y rejuvenece sin cirugía.',
    category:'Facial',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/signal.svg#icon' /></svg>`
  },
  {
    title:'Limpieza de Espalda',
    description:'Especial para pieles con acné o foliculitis.',
    category:'Corporal',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/droplet.svg#icon' /></svg>`
  },
  {
    title:'Exfoliación + Hidratación',
    description:'Piel suave y saludable.',
    category:'Corporal',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/water.svg#icon' /></svg>`
  },
  {
    title:'Masaje Relajación',
    description:'Relaja cuerpo y mente con un masaje integral.',
    category:'Corporal',
    iconSvg:`<svg class='w-10 h-10 text-pink-600'><use href='/icons/hand-raised.svg#icon' /></svg>`
  }
];

const testimonials = [
  {name:'Laura G.', text:'Mi piel cambió por completo después de la limpieza profunda. ¡Excelente servicio!', photo:'/avatars/laura.webp'},
  {name:'Ana P.', text:'La radiofrecuencia me dejó la piel súper firme, lo recomiendo.', photo:'/avatars/ana.webp'},
  {name:'María R.', text:'El trato es muy profesional y los resultados increíbles.', photo:'/avatars/maria.webp'}
];
---

<BaseLayout title="Tratamientos | KS Cosmetóloga" description="Conoce nuestros tratamientos faciales y corporales personalizados." fluid={true}>
  <!-- HERO PREMIUM -->
  <section class="relative overflow-hidden pt-32 pb-20 bg-gradient-to-br from-white via-pink-50 to-rose-50">
    <!-- Elementos decorativos -->
    <div class="absolute -top-24 -left-24 w-96 h-96 bg-pink-200/20 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 -right-24 w-[28rem] h-[28rem] bg-rose-200/20 rounded-full blur-3xl"></div>
    <div class="absolute top-1/2 right-0 w-32 h-32 bg-pink-300/20 rounded-full blur-2xl"></div>

    <div class="relative z-20 max-w-5xl mx-auto text-center px-4">
      <span class="inline-block bg-pink-100 text-pink-700 text-sm font-semibold px-4 py-1 rounded-full mb-4">Tratamientos Profesionales</span>
      <h1 class="text-5xl md:text-6xl font-extrabold text-rose-700 drop-shadow-lg mb-6">Nuestros Tratamientos</h1>
      <p class="text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed mb-10">Descubre el cuidado ideal para tu piel y cuerpo con nuestros tratamientos personalizados y productos de alta calidad.</p>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
          <span class="text-4xl font-bold text-rose-600">15+</span>
          <p class="text-gray-600 mt-2">Tratamientos</p>
        </div>
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
          <span class="text-4xl font-bold text-rose-600">100%</span>
          <p class="text-gray-600 mt-2">Personalizados</p>
        </div>
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
          <span class="text-4xl font-bold text-rose-600">5+</span>
          <p class="text-gray-600 mt-2">Años Experiencia</p>
        </div>
        <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
          <span class="text-4xl font-bold text-rose-600">4.9★</span>
          <p class="text-gray-600 mt-2">Calificación</p>
        </div>
      </div>
    </div>
  </section>

<!-- TRATAMIENTOS PREMIUM -->
<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Nuestros Tratamientos</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">Explora nuestra amplia gama de tratamientos faciales y corporales</p>
      
      <!-- Filtros Premium -->
      <div class="flex flex-wrap justify-center gap-4 mb-12" id="treatment-filters">
        <button 
          class="filter-btn px-6 py-2 rounded-full bg-pink-600 text-white font-medium transition-all duration-300 shadow-lg" 
          data-filter="all"
        >
          Todos
        </button>
        <button 
          class="filter-btn px-6 py-2 rounded-full text-gray-600 hover:bg-pink-100 font-medium transition-all duration-300" 
          data-filter="Facial"
        >
          Faciales
        </button>
        <button 
          class="filter-btn px-6 py-2 rounded-full text-gray-600 hover:bg-pink-100 font-medium transition-all duration-300" 
          data-filter="Corporal"
        >
          Corporales
        </button>
      </div>
    </div>

    <!-- Grid de Tratamientos -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="treatments-grid">
      {treatments.map((treatment, index) => (
        <div class="treatment-card group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-100" data-category={treatment.category}>
          <div class="p-8">
            <div class="flex items-center justify-between mb-6">
              <div class="p-3 bg-gradient-to-br from-pink-100 to-rose-100 rounded-xl">
                <Fragment set:html={treatment.iconSvg} />
              </div>
              <span class="bg-pink-100 text-pink-700 text-xs font-semibold px-3 py-1 rounded-full">
                {treatment.category}
              </span>
            </div>
            
            <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-pink-600 transition-colors">
              {treatment.title}
            </h3>
            <p class="text-gray-600 mb-6 leading-relaxed">
              {treatment.description}
            </p>
            
            <div class="flex items-center justify-between">
              <span class="text-2xl font-bold text-pink-600">Desde $50</span>
              <button class="bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded-full font-medium transition-colors">
                Reservar
              </button>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- GALERÍA DE RESULTADOS PREMIUM -->
<section class="py-20 bg-gradient-to-r from-pink-50 to-rose-50">
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Resultados Reales</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">Mira las increíbles transformaciones de nuestras clientas</p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {Array.from({length:6}).map((_,i)=>(
        <div class="group relative overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500">
          <div class="aspect-[4/5] overflow-hidden">
            <img 
              src={`https://picsum.photos/seed/treatment${i}/600/750`} 
              alt={`Resultado ${i+1}`} 
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" 
              loading="lazy" 
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            
            <div class="absolute bottom-4 left-4 right-4 text-white transform translate-y-4 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300">
              <h3 class="font-semibold text-lg mb-1">Transformación {i + 1}</h3>
              <p class="text-sm text-gray-200">Ver resultado completo</p>
            </div>
            
            <div class="absolute top-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
              </svg>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- TESTIMONIOS PREMIUM -->
<section class="py-20 bg-white">
  <div class="max-w-6xl mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Lo que Dicen Nuestras Clientes</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">Experiencias reales de personas que han confiado en nosotros</p>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      {testimonials.map((testimonial, index) => (
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100">
          <div class="flex items-center mb-4">
            <div class="text-yellow-400 text-2xl">★★★★★</div>
          </div>
          <p class="text-gray-700 mb-6 leading-relaxed">"{testimonial.text}"</p>
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-pink-200 flex items-center justify-center text-pink-700 font-bold text-xl mr-4">
              {testimonial.name.split(' ').map(n => n[0]).join('')}
            </div>
            <div>
              <h4 class="font-semibold text-gray-900">{testimonial.name}</h4>
              <p class="text-sm text-gray-500">Cliente verificada</p>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- FAQ -->
<section class="py-20 px-6 bg-pink-50">
  <SectionTitle title="Preguntas frecuentes" />
  <div class="max-w-4xl mx-auto" x-data="{open:null}">
    <template x-for="(q,idx) in [
      {q:'¿Con qué frecuencia debo hacerme una limpieza facial?',a:'Recomendamos cada 4-6 semanas para mantener la piel saludable.'},
      {q:'¿Duele la radiofrecuencia?',a:'Es un tratamiento indoloro; solo se siente calor agradable.'},
      {q:'¿Puedo combinar varios tratamientos?',a:'Sí, diseñamos un plan personalizado según tus necesidades.'}
    ]" :key="idx">
      <div class="mb-4 border border-pink-200 rounded-lg overflow-hidden">
        <button @click="open=open===idx?null:idx" class="w-full flex justify-between items-center p-4 bg-white hover:bg-pink-100">
          <span x-text="q.q" class="font-medium text-pink-700"></span>
          <span x-text="open===idx?'−':'+'" class="text-xl font-bold text-pink-700"></span>
        </button>
        <div x-show="open===idx" x-collapse class="p-4 bg-white text-gray-600" x-text="q.a"></div>
      </div>
    </template>
  </div>
</section>

<!-- CTA FINAL -->
<section class="py-20 px-6 bg-pink-600 text-center text-white" data-aos="fade-up">
  <h2 class="text-3xl md:text-4xl font-semibold mb-4">¿Lista para lucir tu mejor versión?</h2>
  <p class="mb-6 text-lg">Agenda tu cita hoy mismo y déjanos cuidar de ti.</p>
  <a href="https://wa.me/18099582261" target="_blank" class="inline-block bg-white text-pink-600 font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-pink-50 transition">
    Hablar por WhatsApp
  </a>
</section>

<!-- JavaScript para Filtrado -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const treatmentCards = document.querySelectorAll('.treatment-card');
    
    // Función para filtrar tratamientos
    function filterTreatments(category) {
      treatmentCards.forEach(card => {
        const cardCategory = card.getAttribute('data-category');
        
        if (category === 'all' || cardCategory === category) {
          // Mostrar tarjeta con animación
          card.style.display = 'block';
          card.style.opacity = '0';
          card.style.transform = 'translateY(20px)';
          
          setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
          }, 50);
        } else {
          // Ocultar tarjeta con animación
          card.style.transition = 'all 0.3s ease';
          card.style.opacity = '0';
          card.style.transform = 'translateY(-20px)';
          
          setTimeout(() => {
            card.style.display = 'none';
          }, 300);
        }
      });
    }
    
    // Función para actualizar botones activos
    function updateActiveButton(activeButton) {
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-pink-600', 'text-white', 'shadow-lg');
        btn.classList.add('text-gray-600', 'hover:bg-pink-100');
      });
      
      activeButton.classList.remove('text-gray-600', 'hover:bg-pink-100');
      activeButton.classList.add('bg-pink-600', 'text-white', 'shadow-lg');
    }
    
    // Event listeners para los botones de filtro
    filterButtons.forEach(button => {
      button.addEventListener('click', function() {
        const filter = this.getAttribute('data-filter');
        filterTreatments(filter);
        updateActiveButton(this);
        
        // Scroll suave al grid de tratamientos
        document.getElementById('treatments-grid').scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
    });
    
    // Contador de tratamientos visible
    function updateTreatmentCount() {
      const visibleCards = Array.from(treatmentCards).filter(card => 
        card.style.display !== 'none'
      ).length;
      
      // Opcional: mostrar contador
      console.log(`Mostrando ${visibleCards} tratamientos`);
    }
    
    // Inicializar con todos los tratamientos visibles
    filterTreatments('all');
  });
</script>

<style>
  .treatment-card {
    transition: all 0.5s ease;
  }
  
  .filter-btn {
    position: relative;
    overflow: hidden;
  }
  
  .filter-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }
  
  .filter-btn:hover::before {
    left: 100%;
  }
  
  @media (max-width: 768px) {
    #treatment-filters {
      gap: 0.5rem;
    }
    
    .filter-btn {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
  }
</style>

</BaseLayout>
